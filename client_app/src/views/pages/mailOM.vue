<template>
  <div class="h-screen flex overflow-hidden bg-gray-100">
    <aside class="h-screen">
      <asidebar></asidebar>
    </aside>
    <div class="flex-1 overflow-auto focus:outline-none" tabindex="0">
      <navaca></navaca>

      <main class="max-w-2xl mx-auto mt-8 pb-8 px-4 space-y-8 divide-y divide-gray-200">
        <section class="mt-6 grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6">
          <h3 class="sm:col-span-6 text-lg leading-6 font-medium text-gray-900">
            معلومات البريد
          </h3>
          <div class="sm:col-span-6">
            <label
              for="first_name"
              class="block text-sm font-medium text-gray-700"
            >
              الجهة المرسلة
            </label>
            <div class="mt-2">
              <input
                v-model="sender"
                type="text"
                id="first_name"
                class="shadow-sm focus:ring-cyan-700 focus:border-cyan-700 block mt-1 h-16 w-full sm:text-sm border-gray-300 rounded-md"
                required=""
              />
            </div>
          </div>

          <div class="sm:col-span-6">
            <label
              for="about"
              class="block text-sm font-medium text-gray-700"
            >
              الملخص
            </label>
            <div class="mt-2">
              <textarea
                v-model="sentMessage"
                id="about"
                rows="3"
                class="shadow-sm text-right focus:ring-cyan-700 focus:border-cyan-700 block w-full sm:text-sm border-gray-300 rounded-md"
              >
              </textarea>
            </div>
          </div>

          <div class="sm:col-span-3">
            <label for="date" class="block text-sm font-medium text-gray-700">
              تاريخ الارسال
            </label>
            <div class="mt-2">
              <input
                v-model="releaseDate"
                type="date"
                id="date"
                class="items-center justify-center h-10 px-2 shadow-sm focus:ring-cyan-700 focus:border-cyan-700 block w-full sm:text-sm border-gray-300 rounded-md"
              />
            </div>
          </div>

          <div class="sm:col-span-6">
            <fieldset class="">
              <div>
                <legend class="block text-sm font-medium text-gray-700">
                  نوع البريد
                </legend>
              </div>
              <div class="mt-2 space-y-4">
                <div class="flex items-center">
                  <input
                    v-model="mailType"
                    id="internal"
                    type="radio"
                    class="focus:ring-cyan-700 h-4 w-4 text-cyan-700 border-gray-300"
                    value="1"
                  />
                  <label
                    for="internal"
                    class="mr-3 block text-sm font-medium text-gray-700"
                  >
                    داخلي
                  </label>
                </div>
                <div class="flex items-center">
                  <input
                    v-model="mailType"
                    id="external"
                    type="radio"
                    class="focus:ring-cyan-700 h-4 w-4 text-cyan-700 border-gray-300"
                    value="2"
                  />
                  <label
                    for="external"
                    class="mr-3 block text-sm font-medium text-gray-700"
                  >
                    خارجي
                  </label>
                </div>
              </div>
            </fieldset>
          </div>

          <div class="sm:col-span-6">
            <div v-if="updataButton" class="flex justify-end mt-10">
               <button
                @click="updateMail"
                type="button"
                id="edit"
                class="w-full sm:w-auto sm:mr-3 flex justify-center items-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-cyan-600 hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-700"
              >
                <!-- onclick="change();" -->
                <svg
                  class="w-4 h-4 stroke-current text-white ml-2 fill-current"
                  version="1.1"
                  id="Capa_1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px"
                  y="0px"
                  viewBox="0 0 477.873 477.873"
                  style="enable-background: new 0 0 477.873 477.873"
                  xml:space="preserve"
                >
                  <g>
                    <g>
                      <path
                        d="M392.533,238.937c-9.426,0-17.067,7.641-17.067,17.067V426.67c0,9.426-7.641,17.067-17.067,17.067H51.2
                        c-9.426,0-17.067-7.641-17.067-17.067V85.337c0-9.426,7.641-17.067,17.067-17.067H256c9.426,0,17.067-7.641,17.067-17.067
                        S265.426,34.137,256,34.137H51.2C22.923,34.137,0,57.06,0,85.337V426.67c0,28.277,22.923,51.2,51.2,51.2h307.2
                        c28.277,0,51.2-22.923,51.2-51.2V256.003C409.6,246.578,401.959,238.937,392.533,238.937z"
                      ></path>
                    </g>
                  </g>
                  <g>
                    <g>
                      <path
                        d="M458.742,19.142c-12.254-12.256-28.875-19.14-46.206-19.138c-17.341-0.05-33.979,6.846-46.199,19.149L141.534,243.937
                        c-1.865,1.879-3.272,4.163-4.113,6.673l-34.133,102.4c-2.979,8.943,1.856,18.607,10.799,21.585
                        c1.735,0.578,3.552,0.873,5.38,0.875c1.832-0.003,3.653-0.297,5.393-0.87l102.4-34.133c2.515-0.84,4.8-2.254,6.673-4.13
                        l224.802-224.802C484.25,86.023,484.253,44.657,458.742,19.142z M434.603,87.419L212.736,309.286l-66.287,22.135l22.067-66.202
                        L390.468,43.353c12.202-12.178,31.967-12.158,44.145,0.044c5.817,5.829,9.095,13.72,9.12,21.955
                        C443.754,73.631,440.467,81.575,434.603,87.419z"
                      ></path>
                    </g>
                  </g>
                </svg>
                تعديل
              </button>
            </div>
            <div v-if="saveButton" class="flex justify-end mt-10">
              <button
                class="flex justify-center items-center py-2 px-8 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-cyan-600 hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-700"
                @click="saveMail()"
              >
                <svg
                  class="w-4 h-4 stroke-current text-white ml-2 fill-current"
                  version="1.1"
                  id="Capa_1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px"
                  y="0px"
                  viewBox="0 0 512 512"
                  style="enable-background: new 0 0 512 512"
                  xml:space="preserve"
                >
                  <g>
                    <g>
                      <g>
                        <path
                          d="M166,332h180c8.284,0,15-6.716,15-15s-6.716-15-15-15H166c-8.284,0-15,6.716-15,15S157.716,332,166,332z"
                        ></path>
                        <path
                          d="M166,392h180c8.284,0,15-6.716,15-15s-6.716-15-15-15H166c-8.284,0-15,6.716-15,15S157.716,392,166,392z"
                        ></path>
                        <path
                          d="M507.606,84.394l-80-80C424.793,1.58,420.978,0,417,0H15C6.716,0,0,6.716,0,15v482c0,8.284,6.716,15,15,15
                              c6.912,0,477.495,0,482,0c8.284,0,15-6.716,15-15V95C512,91.021,510.419,87.206,507.606,84.394z M121,30h210v100H121V30z
                              M391,482H121V272h270V482z M482,482h-61V257c0-8.284-6.716-15-15-15H106c-8.284,0-15,6.716-15,15v225H30V30h61v115
                              c0,8.284,6.716,15,15,15h240c8.284,0,15-6.716,15-15V30h49.787L482,101.213V482z"
                        ></path>
                        <path
                          d="M166,452h180c8.284,0,15-6.716,15-15s-6.716-15-15-15H166c-8.284,0-15,6.716-15,15S157.716,452,166,452z"
                        ></path>
                      </g>
                    </g>
                  </g>
                </svg>
                حفظ
              </button>
            </div>
          </div>
        </section>

        <section v-if="documentSection" class="pt-4">
          <h3 class="block text-sm font-medium text-gray-700">المستندات</h3>

          <section class="mt-4 grid sm:grid-cols-3 gap-6">
            <div>
              <label
                class="w-full flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg tracking-wide border border-cyan-500 cursor-pointer hover:text-white hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-700 duration-300"
              >
                <svg
                  class="w-8 h-8"
                  fill="currentColor"
                  version="1.1"
                  id="Capa_1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px"
                  y="0px"
                  viewBox="0 0 512 512"
                  style="enable-background: new 0 0 512 512"
                  xml:space="preserve"
                >
                  <g>
                    <g>
                      <g>
                        <path
                          d="M509.501,116.968c1.6-1.6,2.499-3.771,2.499-6.035V76.8c-0.019-1.015-0.222-2.019-0.598-2.962
                            c-0.076-0.203-0.14-0.399-0.23-0.595c-0.391-0.864-0.925-1.655-1.579-2.342c-0.123-0.128-0.265-0.221-0.396-0.341
                            c-0.309-0.312-0.643-0.6-0.997-0.86l-102.4-68.267C404.399,0.499,402.752,0,401.067,0H110.933
                            c-1.685,0.001-3.331,0.499-4.733,1.434L3.8,69.7c-0.354,0.26-0.688,0.548-0.997,0.86c-0.131,0.12-0.273,0.214-0.396,0.341
                            c-0.654,0.687-1.188,1.478-1.579,2.342c-0.091,0.195-0.154,0.392-0.23,0.595C0.222,74.781,0.019,75.785,0,76.8v34.133
                            c-0.001,2.263,0.898,4.434,2.499,6.035c1.6,1.6,3.771,2.499,6.035,2.499h73.225L0.496,347c-0.114,0.476-0.184,0.961-0.21,1.449
                            c-0.138,0.463-0.233,0.937-0.286,1.417V435.2c0.028,23.553,19.114,42.639,42.667,42.667h17.067v17.067
                            c0.011,9.421,7.645,17.056,17.067,17.067h358.4c9.421-0.011,17.056-7.645,17.067-17.067v-17.067h17.067
                            c23.553-0.028,42.639-19.114,42.667-42.667v-85.333c-0.218-0.946-0.383-1.903-0.496-2.867l-81.262-227.533h73.225
                            C505.73,119.467,507.901,118.568,509.501,116.968z M113.517,17.067h284.967l76.8,51.2H36.717L113.517,17.067z M76.8,494.933
                            v-17.067h358.404l0.008,17.067H76.8z M494.933,435.2c-0.015,14.132-11.468,25.585-25.6,25.6H42.667
                            c-14.132-0.015-25.585-11.468-25.6-25.6v-76.8H128v42.667c0.015,14.132,11.468,25.585,25.6,25.6h204.8
                            c14.132-0.015,25.585-11.468,25.6-25.6V358.4h110.933V435.2z M164.632,390.035c1.6,1.6,3.771,2.499,6.035,2.499h170.667
                            c2.263,0.001,4.434-0.898,6.035-2.499c1.6-1.6,2.499-3.771,2.499-6.035v-25.6h17.067v42.667
                            c-0.005,4.711-3.822,8.529-8.533,8.533H153.6c-4.711-0.005-8.529-3.822-8.533-8.533V358.4h17.067V384
                            C162.133,386.263,163.032,388.434,164.632,390.035z M179.2,375.467V358.4h17.067v17.067H179.2z M213.333,375.467V358.4H230.4
                            v17.067H213.333z M247.467,375.467V358.4h17.067v17.067H247.467z M281.6,375.467V358.4h17.067v17.067H281.6z M315.733,375.467
                            V358.4H332.8v17.067H315.733z M491.358,341.333H20.642L99.88,119.467h312.24L491.358,341.333z M494.933,102.4H17.067V85.333
                            h477.867V102.4z"
                        />
                        <path
                          d="M68.267,375.467H51.2c-9.421,0.011-17.056,7.646-17.067,17.067V409.6c0.011,9.421,7.645,17.056,17.067,17.067h17.067
                            c9.421-0.011,17.056-7.645,17.067-17.067v-17.067C85.323,383.112,77.688,375.477,68.267,375.467z M51.2,409.6v-17.067h17.067
                            l0.012,17.067H51.2z"
                        />
                        <path
                          d="M388.067,136.533H123.933c-7.21,0.012-13.639,4.545-16.071,11.333L53,301.458c-1.863,5.227-1.07,11.034,2.127,15.57
                            s8.399,7.236,13.948,7.238h373.85c5.548-0.003,10.748-2.701,13.945-7.235c3.197-4.534,3.991-10.339,2.13-15.565l-54.862-153.6
                            C401.705,141.079,395.277,136.546,388.067,136.533z M69.067,307.225l0.009-0.017V307.2l54.858-153.6h264.129l54.862,153.6
                            L69.067,307.225z"
                        />
                        <path
                          d="M128.009,221.867c1.682-0.001,3.326-0.5,4.725-1.434l25.6-17.067c3.872-2.633,4.899-7.894,2.302-11.79
                            s-7.849-4.971-11.768-2.409l-25.6,17.067c-3.13,2.087-4.524,5.977-3.432,9.577C120.927,219.41,124.247,221.87,128.009,221.867z"
                        />
                        <path
                          d="M179.2,187.733c2.855,0.03,5.532-1.385,7.115-3.761c1.584-2.376,1.86-5.39,0.735-8.014
                            c-1.031-2.685-3.362-4.656-6.181-5.227c-2.819-0.571-5.733,0.338-7.728,2.41c-0.755,0.829-1.363,1.782-1.796,2.817
                            c-1.122,2.625-0.844,5.639,0.74,8.013C173.67,186.346,176.346,187.761,179.2,187.733z"
                        />
                        <path
                          d="M225.542,172.183l-110.933,76.8c-3.071,2.125-4.403,6.001-3.287,9.565c1.116,3.564,4.419,5.989,8.154,5.984
                            c1.733,0.001,3.426-0.529,4.85-1.517l110.933-76.8c3.864-2.687,4.824-7.996,2.144-11.865
                            C234.723,170.482,229.417,169.512,225.542,172.183z"
                        />
                        <path
                          d="M463.275,407.125c0.829,0.753,1.78,1.359,2.813,1.792c2.066,0.911,4.421,0.911,6.487,0
                            c1.034-0.433,1.987-1.039,2.817-1.792c0.751-0.832,1.357-1.784,1.792-2.817c0.438-1.026,0.67-2.127,0.683-3.242
                            c-0.016-0.545-0.073-1.088-0.171-1.625c-0.082-0.563-0.255-1.109-0.513-1.617c-0.187-0.546-0.447-1.064-0.771-1.542
                            c-0.313-0.446-0.654-0.872-1.021-1.275c-0.816-0.771-1.772-1.379-2.817-1.792c-3.177-1.341-6.849-0.634-9.3,1.792l-1.025,1.275
                            c-0.324,0.477-0.583,0.996-0.771,1.542c-0.258,0.507-0.43,1.053-0.508,1.617c-0.1,0.536-0.157,1.08-0.171,1.625
                            c0.012,1.115,0.243,2.216,0.679,3.242C461.914,405.342,462.521,406.295,463.275,407.125z"
                        />
                        <path
                          d="M431.954,408.916c2.067,0.911,4.421,0.911,6.487,0c1.034-0.433,1.987-1.039,2.817-1.792
                            c0.751-0.832,1.357-1.784,1.792-2.817c0.437-1.025,0.669-2.126,0.683-3.241c-0.016-0.545-0.073-1.088-0.171-1.625
                            c-0.082-0.563-0.255-1.109-0.513-1.617c-0.187-0.546-0.447-1.064-0.771-1.542c-0.338-0.425-0.679-0.85-1.021-1.275
                            c-0.83-0.753-1.783-1.359-2.817-1.792c-3.178-1.333-6.845-0.626-9.3,1.792l-1.025,1.275c-0.324,0.477-0.583,0.996-0.771,1.542
                            c-0.258,0.507-0.43,1.053-0.508,1.617c-0.1,0.536-0.157,1.08-0.171,1.625c-0.029,1.119,0.204,2.229,0.679,3.242
                            C428.126,406.449,429.813,408.136,431.954,408.916z"
                        />
                      </g>
                    </g>
                  </g>
                </svg>
                <span class="mt-2 text-base leading-normal"
                  >الماسح الضوئي</span
                >
                <input class="hidden" type="button" @click="scanToJpg" />
              </label>
            </div>
            <div>
              <label
                class="w-full flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg tracking-wide border border-cyan-500 cursor-pointer hover:text-white hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-700 duration-300"
              >
                <svg
                  class="w-8 h-8"
                  fill="currentColor"
                  id="Layer_1"
                  enable-background="new 0 0 512 512"
                  height="512"
                  viewBox="0 0 512 512"
                  width="512"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g>
                    <g>
                      <path
                        d="m511.993 125.708c0-69.315-56.403-125.708-125.733-125.708-54.981 0-101.825 35.485-118.849 84.754h-233.481c-18.705 0-33.923 15.218-33.923 33.924v98.304c0 5.523 4.478 10 10 10s10-4.477 10-10v-98.304c0-7.678 6.246-13.924 13.923-13.924h228.382c-1.149 6.817-1.756 13.815-1.756 20.954 0 .353.01.703.013 1.055h-208.555c-5.522 0-10 4.477-10 10v250.266c0 5.523 4.478 10 10 10h376.707c5.522 0 10-4.477 10-10v-147.067c7.787-3.59 15.146-7.952 21.979-12.99v178.113c0 7.547-6.376 13.924-13.923 13.924h-221.885c-1.767 0-3.502.468-5.029 1.357l-110.398 64.245v-55.602c0-5.523-4.478-10-10-10h-65.535c-7.677 0-13.923-6.246-13.923-13.924v-98.304c0-5.523-4.478-10-10-10s-10 4.477-10 10v98.304c0 18.706 15.218 33.924 33.923 33.924h55.534v62.991c0 3.579 1.912 6.885 5.015 8.669 1.544.888 3.265 1.331 4.985 1.331 1.737 0 3.476-.453 5.029-1.357l123.097-71.634h219.188c18.705 0 33.923-15.218 33.923-33.924v-196.466c19.467-22.15 31.292-51.174 31.292-82.911zm-125.733-105.708c58.302 0 105.733 47.42 105.733 105.708 0 58.303-47.432 105.736-105.733 105.736-58.285 0-105.704-47.433-105.704-105.736 0-58.288 47.419-105.708 105.704-105.708zm-324.246 356.799 116.08-103.503 116.335 103.733h-232.415zm262.467.23-48.453-43.204 47.25-42.132 95.443 85.106v.23zm94.24-27.027-88.788-79.172c-3.793-3.382-9.518-3.382-13.311 0l-55.62 49.596-76.253-67.993c-3.793-3.381-9.518-3.381-13.311 0l-109.424 97.57v-203.24h200.314c10.045 59.342 61.791 104.682 123.932 104.682 11.222 0 22.101-1.486 32.461-4.257z"
                      />
                      <path
                        d="m355.052 97.526c2.561 0 5.122-.978 7.074-2.932l14.134-14.147v58.952c0 5.523 4.478 10 10 10s10-4.477 10-10v-58.968l14.165 14.165c1.953 1.953 4.512 2.929 7.071 2.929s5.118-.977 7.071-2.929c3.905-3.905 3.905-10.237 0-14.142l-31.236-31.237c-1.168-1.168-2.639-2.049-4.225-2.517-3.255-.964-6.897-.226-9.557 2.19-.12.109-.245.21-.361.326-.002.002-.003.003-.005.005l-31.206 31.235c-3.903 3.907-3.9 10.239.007 14.142 1.953 1.953 4.51 2.928 7.068 2.928z"
                      />
                      <path
                        d="m328.322 188.148h115.875c5.522 0 10-4.477 10-10v-27.07c0-5.523-4.478-10-10-10s-10 4.477-10 10v17.07h-95.875v-17.07c0-5.523-4.478-10-10-10s-10 4.477-10 10v27.07c0 5.523 4.478 10 10 10z"
                      />
                      <path
                        d="m121.998 170.897c-19.769 0-35.851 16.083-35.851 35.852s16.082 35.852 35.851 35.852 35.851-16.083 35.851-35.852-16.082-35.852-35.851-35.852zm0 51.704c-8.74 0-15.851-7.111-15.851-15.852s7.11-15.852 15.851-15.852 15.851 7.111 15.851 15.852-7.111 15.852-15.851 15.852z"
                      />
                      <path
                        d="m10.007 271.882c5.522 0 10-4.477 10-10v-.028c0-5.523-4.478-9.986-10-9.986s-10 4.491-10 10.014 4.477 10 10 10z"
                      />
                    </g>
                  </g>
                </svg>
                <span class="mt-2 text-base leading-normal">تحميل الصور</span>
                <input
                  class="hidden"
                  multiple
                  type="file"
                  accept="image/*"
                  @change="onFileChange"
                />
              </label>
            </div>

            <div :class="isThisMobile ? '' : 'cursor-not-allowed'">
              <label
                :class="
                  isThisMobile
                    ? 'cursor-pointer border border-cyan-500 hover:text-white  hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-700 duration-300'
                    : ' pointer-events-none'
                "
                class="w-full flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg tracking-wide"
              >
                <svg
                  class="w-8 h-8"
                  fill="currentColor"
                  height="512pt"
                  viewBox="-74 0 512 512"
                  width="512pt"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="m301.765625 0h-171.296875c-4.144531 0-7.5 3.359375-7.5 7.5s3.355469 7.5 7.5 7.5h171.296875c25.644531 0 46.507813 20.863281 46.507813 46.507812v388.984376c0 25.644531-20.863282 46.507812-46.507813 46.507812h-240.257813c-25.644531 0-46.507812-20.863281-46.507812-46.507812v-388.984376c0-25.644531 20.863281-46.507812 46.507812-46.507812h38.960938c4.140625 0 7.5-3.359375 7.5-7.5s-3.359375-7.5-7.5-7.5h-38.960938c-33.914062 0-61.507812 27.59375-61.507812 61.507812v388.984376c0 33.914062 27.59375 61.507812 61.507812 61.507812h240.257813c33.917969 0 61.507813-27.59375 61.507813-61.507812v-388.984376c0-33.914062-27.589844-61.507812-61.507813-61.507812zm0 0"
                  />
                  <path
                    d="m54.007812 57.5v362c0 4.140625 3.359376 7.5 7.5 7.5h176.960938c4.140625 0 7.5-3.359375 7.5-7.5s-3.359375-7.5-7.5-7.5h-169.460938v-347h225.257813v347h-25.796875c-4.144531 0-7.5 3.359375-7.5 7.5s3.355469 7.5 7.5 7.5h33.296875c4.140625 0 7.5-3.359375 7.5-7.5v-362c0-4.140625-3.359375-7.5-7.5-7.5h-240.257813c-4.140624 0-7.5 3.359375-7.5 7.5zm0 0"
                  />
                  <path
                    d="m124.917969 114.316406v-11.621094c0-4.140624-3.359375-7.5-7.5-7.5-4.144531 0-7.5 3.359376-7.5 7.5v11.621094c0 4.144532 3.355469 7.5 7.5 7.5 4.140625 0 7.5-3.355468 7.5-7.5zm0 0"
                  />
                  <path
                    d="m253.355469 114.316406v-11.621094c0-4.140624-3.355469-7.5-7.5-7.5-4.140625 0-7.5 3.359376-7.5 7.5v11.621094c0 4.144532 3.359375 7.5 7.5 7.5 4.144531 0 7.5-3.355468 7.5-7.5zm0 0"
                  />
                  <path
                    d="m181.636719 128.023438c8.34375 0 16.175781-3.492188 21.496093-9.578126 2.726563-3.117187 2.410157-7.855468-.710937-10.582031-3.117187-2.726562-7.855469-2.410156-10.582031.707031-2.472656 2.828126-6.191406 4.449219-10.203125 4.449219s-7.730469-1.621093-10.203125-4.449219c-2.726563-3.117187-7.464844-3.433593-10.582032-.710937-3.121093 2.730469-3.4375 7.464844-.710937 10.585937 5.320313 6.085938 13.15625 9.578126 21.496094 9.578126zm0 0"
                  />
                  <path
                    d="m188.804688 32.5c0 3.957031-3.210938 7.167969-7.167969 7.167969s-7.167969-3.210938-7.167969-7.167969 3.210938-7.167969 7.167969-7.167969 7.167969 3.210938 7.167969 7.167969zm0 0"
                  />
                  <path
                    d="m156.953125 462c0 13.613281 11.074219 24.6875 24.683594 24.6875 13.613281 0 24.6875-11.074219 24.6875-24.6875 0-13.609375-11.074219-24.683594-24.6875-24.683594s-24.683594 11.074219-24.683594 24.683594zm34.367187 0c0 5.339844-4.34375 9.6875-9.683593 9.6875-5.339844 0-9.6875-4.347656-9.6875-9.6875s4.347656-9.683594 9.6875-9.683594c5.339843 0 9.683593 4.34375 9.683593 9.683594zm0 0"
                  />
                  <path
                    d="m89.03125 221.378906v86.976563c0 15.738281 12.808594 28.546875 28.546875 28.546875h128.117187c15.742188 0 28.546876-12.808594 28.546876-28.546875v-86.976563c0-15.738281-12.804688-28.546875-28.546876-28.546875h-16.054687c-2.730469 0-5.148437-1.835937-5.875-4.464843l-3.855469-13.878907c-2.890625-10.394531-12.441406-17.65625-23.230468-17.65625h-30.085938c-10.789062 0-20.339844 7.261719-23.230469 17.65625l-3.851562 13.878907c-.730469 2.628906-3.148438 4.464843-5.875 4.464843h-16.058594c-15.738281 0-28.546875 12.808594-28.546875 28.546875zm15 0c0-7.46875 6.078125-13.546875 13.546875-13.546875h16.058594c9.441406 0 17.800781-6.351562 20.328125-15.449219l3.851562-13.878906c1.09375-3.929687 4.703125-6.671875 8.777344-6.671875h30.085938c4.078124 0 7.683593 2.742188 8.777343 6.671875l3.855469 13.878906c2.527344 9.097657 10.882812 15.449219 20.328125 15.449219h16.054687c7.46875 0 13.546876 6.078125 13.546876 13.546875v86.976563c0 7.46875-6.078126 13.546875-13.546876 13.546875h-128.117187c-7.46875 0-13.546875-6.078125-13.546875-13.546875zm0 0"
                  />
                  <path
                    d="m181.636719 292.5c20.125 0 36.5-16.375 36.5-36.5s-16.375-36.5-36.5-36.5-36.5 16.375-36.5 36.5 16.375 36.5 36.5 36.5zm0-58c11.855469 0 21.5 9.644531 21.5 21.5s-9.644531 21.5-21.5 21.5-21.5-9.644531-21.5-21.5 9.644531-21.5 21.5-21.5zm0 0"
                  />
                </svg>
                <span class="mt-2 text-base leading-normal"
                  >كاميرا الهاتف</span
                >
                <input
                  class="hidden"
                  type="file"
                  accept="image/*"
                  capture="camera"
                  @change="onFileChange"
                />
              </label>
            </div>
          </section>

          <div
             v-if=" imagesToSend != '' || imagesToShow != '' " 
            class="mt-4 px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"
          >
            <div class="grid sm:grid-cols-3 gap-6">
              <div
                v-for="(image, index) in imagesToSend"
                :key="index"
                class="relative h-64 w-full"
              >
                <img :src="image.documentFile" class="w-full h-full rounded" />
                <button
                  type="button"
                  class="absolute bg-red-600 hover:bg-red-500 duration-500 p-2 rounded-full bottom-0 inset-x-0 mx-auto mb-2 focus:outline-none"
                  @click="removeImage(index)"
                >
                  <svg
                    class="w-4 h-4 text-white fill-current"
                    height="427pt"
                    viewBox="-40 0 427 427.00131"
                    width="427pt"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="m232.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                    />
                    <path
                      d="m114.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                    />
                    <path
                      d="m28.398438 127.121094v246.378906c0 14.5625 5.339843 28.238281 14.667968 38.050781 9.285156 9.839844 22.207032 15.425781 35.730469 15.449219h189.203125c13.527344-.023438 26.449219-5.609375 35.730469-15.449219 9.328125-9.8125 14.667969-23.488281 14.667969-38.050781v-246.378906c18.542968-4.921875 30.558593-22.835938 28.078124-41.863282-2.484374-19.023437-18.691406-33.253906-37.878906-33.257812h-51.199218v-12.5c.058593-10.511719-4.097657-20.605469-11.539063-28.03125-7.441406-7.421875-17.550781-11.5546875-28.0625-11.46875h-88.796875c-10.511719-.0859375-20.621094 4.046875-28.0625 11.46875-7.441406 7.425781-11.597656 17.519531-11.539062 28.03125v12.5h-51.199219c-19.1875.003906-35.394531 14.234375-37.878907 33.257812-2.480468 19.027344 9.535157 36.941407 28.078126 41.863282zm239.601562 279.878906h-189.203125c-17.097656 0-30.398437-14.6875-30.398437-33.5v-245.5h250v245.5c0 18.8125-13.300782 33.5-30.398438 33.5zm-158.601562-367.5c-.066407-5.207031 1.980468-10.21875 5.675781-13.894531 3.691406-3.675781 8.714843-5.695313 13.925781-5.605469h88.796875c5.210937-.089844 10.234375 1.929688 13.925781 5.605469 3.695313 3.671875 5.742188 8.6875 5.675782 13.894531v12.5h-128zm-71.199219 32.5h270.398437c9.941406 0 18 8.058594 18 18s-8.058594 18-18 18h-270.398437c-9.941407 0-18-8.058594-18-18s8.058593-18 18-18zm0 0"
                    />
                    <path
                      d="m173.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                    />
                  </svg>
                </button>
              </div>

              <div
                v-for="(image, index) in imagesToShow"
                :key="image.documentId"
                class="relative h-64 w-full"
              >
                <img :src="image.documentFile" class="w-full h-full rounded" />
                <button
                  type="button"
                  class="absolute bg-red-600 hover:bg-red-500 duration-500 p-2 rounded-full bottom-0 inset-x-0 mx-auto mb-2 focus:outline-none"
                  @click="deleteDocument(image.documentId, index)"
                >
                  <svg
                    class="w-4 h-4 text-white fill-current"
                    height="427pt"
                    viewBox="-40 0 427 427.00131"
                    width="427pt"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="m232.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                    />
                    <path
                      d="m114.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                    />
                    <path
                      d="m28.398438 127.121094v246.378906c0 14.5625 5.339843 28.238281 14.667968 38.050781 9.285156 9.839844 22.207032 15.425781 35.730469 15.449219h189.203125c13.527344-.023438 26.449219-5.609375 35.730469-15.449219 9.328125-9.8125 14.667969-23.488281 14.667969-38.050781v-246.378906c18.542968-4.921875 30.558593-22.835938 28.078124-41.863282-2.484374-19.023437-18.691406-33.253906-37.878906-33.257812h-51.199218v-12.5c.058593-10.511719-4.097657-20.605469-11.539063-28.03125-7.441406-7.421875-17.550781-11.5546875-28.0625-11.46875h-88.796875c-10.511719-.0859375-20.621094 4.046875-28.0625 11.46875-7.441406 7.425781-11.597656 17.519531-11.539062 28.03125v12.5h-51.199219c-19.1875.003906-35.394531 14.234375-37.878907 33.257812-2.480468 19.027344 9.535157 36.941407 28.078126 41.863282zm239.601562 279.878906h-189.203125c-17.097656 0-30.398437-14.6875-30.398437-33.5v-245.5h250v245.5c0 18.8125-13.300782 33.5-30.398438 33.5zm-158.601562-367.5c-.066407-5.207031 1.980468-10.21875 5.675781-13.894531 3.691406-3.675781 8.714843-5.695313 13.925781-5.605469h88.796875c5.210937-.089844 10.234375 1.929688 13.925781 5.605469 3.695313 3.671875 5.742188 8.6875 5.675782 13.894531v12.5h-128zm-71.199219 32.5h270.398437c9.941406 0 18 8.058594 18 18s-8.058594 18-18 18h-270.398437c-9.941407 0-18-8.058594-18-18s8.058593-18 18-18zm0 0"
                    />
                    <path
                      d="m173.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                    />
                  </svg>
                </button>
              </div>
            </div>

            <div class="flex justify-center mt-10">
              <button
                @click="addDocuments"
                type="button"
                class="mr-3 flex justify-center items-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-cyan-600 hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-700"
              >
                <svg
                  class="w-4 h-4 stroke-current text-white ml-2 fill-current"
                  height="512"
                  viewBox="0 0 55 60"
                  width="512"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g id="Page-1" fill-rule="evenodd">
                    <g id="040---Save-File" fill-rule="nonzero">
                      <path
                        id="Shape"
                        d="m53 5v39h-7c-2.7600532.0033061-4.9966939 2.2399468-5 5v7h-3c-.5522847 0-1 .4477153-1 1s.4477153 1 1 1h4c.2651948-.0000566.5195073-.1054506.707-.293l12-12c.1875494-.1874927.2929434-.4418052.293-.707v-40c-.0033061-2.76005315-2.2399468-4.99669388-5-5h-40c-2.76005315.00330612-4.99669388 2.23994685-5 5v17c0 .5522847.44771525 1 1 1s1-.4477153 1-1v-17c0-1.65685425 1.34314575-3 3-3h40c1.6568542 0 3 1.34314575 3 3zm-7 41h5.586l-8.586 8.586v-5.586c0-1.6568542 1.3431458-3 3-3z"
                      ></path>
                      <path
                        id="Shape"
                        d="m14 6h-2c-.5522847 0-1 .44771525-1 1s.4477153 1 1 1h2c.5522847 0 1-.44771525 1-1s-.4477153-1-1-1z"
                      ></path>
                      <path
                        id="Shape"
                        d="m48 6h-30c-.5522847 0-1 .44771525-1 1s.4477153 1 1 1h30c.5522847 0 1-.44771525 1-1s-.4477153-1-1-1z"
                      ></path>
                      <path
                        id="Shape"
                        d="m14 12h-2c-.5522847 0-1 .4477153-1 1s.4477153 1 1 1h2c.5522847 0 1-.4477153 1-1s-.4477153-1-1-1z"
                      ></path>
                      <path
                        id="Shape"
                        d="m18 14h23c.5522847 0 1-.4477153 1-1s-.4477153-1-1-1h-23c-.5522847 0-1 .4477153-1 1s.4477153 1 1 1z"
                      ></path>
                      <path
                        id="Shape"
                        d="m14 18h-2c-.5522847 0-1 .4477153-1 1s.4477153 1 1 1h2c.5522847 0 1-.4477153 1-1s-.4477153-1-1-1z"
                      ></path>
                      <path
                        id="Shape"
                        d="m18 20h16c.5522847 0 1-.4477153 1-1s-.4477153-1-1-1h-16c-.5522847 0-1 .4477153-1 1s.4477153 1 1 1z"
                      ></path>
                      <path
                        id="Shape"
                        d="m51 21c0-.5522847-.4477153-1-1-1s-1 .4477153-1 1v14c0 .5522847.4477153 1 1 1s1-.4477153 1-1z"
                      ></path>
                      <path
                        id="Shape"
                        d="m50 38c-.5522847 0-1 .4477153-1 1v2c0 .5522847.4477153 1 1 1s1-.4477153 1-1v-2c0-.5522847-.4477153-1-1-1z"
                      ></path>
                      <path
                        id="Shape"
                        d="m3 60h28c1.6568542 0 3-1.3431458 3-3v-28c0-1.6568542-1.3431458-3-3-3h-28c-1.65685425 0-3 1.3431458-3 3v28c0 1.6568542 1.34314575 3 3 3zm4-2v-2h20v2zm6-23v-7h14v7c0 .5522847-.4477153 1-1 1h-12c-.5522847 0-1-.4477153-1-1zm-2-7v7c.0033144.3414397.0655622.679743.184 1h-3.184c-.55228475 0-1-.4477153-1-1v-7zm-9 1c0-.5522847.44771525-1 1-1h2v7c0 1.6568542 1.34314575 3 3 3h18c1.6568542 0 3-1.3431458 3-3v-7h2c.5522847 0 1 .4477153 1 1v28c0 .5522847-.4477153 1-1 1h-2v-2c0-1.1045695-.8954305-2-2-2h-20c-1.1045695 0-2 .8954305-2 2v2h-2c-.55228475 0-1-.4477153-1-1z"
                      ></path>
                      <path
                        id="Shape"
                        d="m17 52c3.3137085 0 6-2.6862915 6-6s-2.6862915-6-6-6-6 2.6862915-6 6c.0033074 3.3123376 2.6876624 5.9966926 6 6zm0-10c2.209139 0 4 1.790861 4 4s-1.790861 4-4 4-4-1.790861-4-4 1.790861-4 4-4z"
                      ></path>
                      <circle id="Oval" cx="16" cy="45" r="1"></circle>
                    </g>
                  </g>
                </svg>

                حفظ المستندات
              </button>
            </div>
          </div>
        </section>

        <section v-if="proceduresSection" class="pt-4">
          <div class="sm:flex justify-between">
            <div>
              <button
                @click="deleteMail()"
                class="flex justify-center items-center bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-700"
              >
                <svg
                  class="w-4 h-4 stroke-current text-black ml-2 fill-current"
                  height="427pt"
                  viewBox="-40 0 427 427.00131"
                  width="427pt"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="m232.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                  ></path>
                  <path
                    d="m114.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                  ></path>
                  <path
                    d="m28.398438 127.121094v246.378906c0 14.5625 5.339843 28.238281 14.667968 38.050781 9.285156 9.839844 22.207032 15.425781 35.730469 15.449219h189.203125c13.527344-.023438 26.449219-5.609375 35.730469-15.449219 9.328125-9.8125 14.667969-23.488281 14.667969-38.050781v-246.378906c18.542968-4.921875 30.558593-22.835938 28.078124-41.863282-2.484374-19.023437-18.691406-33.253906-37.878906-33.257812h-51.199218v-12.5c.058593-10.511719-4.097657-20.605469-11.539063-28.03125-7.441406-7.421875-17.550781-11.5546875-28.0625-11.46875h-88.796875c-10.511719-.0859375-20.621094 4.046875-28.0625 11.46875-7.441406 7.425781-11.597656 17.519531-11.539062 28.03125v12.5h-51.199219c-19.1875.003906-35.394531 14.234375-37.878907 33.257812-2.480468 19.027344 9.535157 36.941407 28.078126 41.863282zm239.601562 279.878906h-189.203125c-17.097656 0-30.398437-14.6875-30.398437-33.5v-245.5h250v245.5c0 18.8125-13.300782 33.5-30.398438 33.5zm-158.601562-367.5c-.066407-5.207031 1.980468-10.21875 5.675781-13.894531 3.691406-3.675781 8.714843-5.695313 13.925781-5.605469h88.796875c5.210937-.089844 10.234375 1.929688 13.925781 5.605469 3.695313 3.671875 5.742188 8.6875 5.675782 13.894531v12.5h-128zm-71.199219 32.5h270.398437c9.941406 0 18 8.058594 18 18s-8.058594 18-18 18h-270.398437c-9.941407 0-18-8.058594-18-18s8.058593-18 18-18zm0 0"
                  ></path>
                  <path
                    d="m173.398438 154.703125c-5.523438 0-10 4.476563-10 10v189c0 5.519531 4.476562 10 10 10 5.523437 0 10-4.480469 10-10v-189c0-5.523437-4.476563-10-10-10zm0 0"
                  ></path>
                </svg>

                مسح
              </button>
            </div>

            <div class="sm:flex mt-6 sm:mt-0">
              <button
              @click="sendMail()"
                type="button"
                id="send"
                class="w-full sm:w-auto sm:mr-3 flex justify-center items-centerr py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-cyan-600 hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-700"
              >
                <!-- onclick="changee();" -->
                <svg
                  class="w-4 h-4 stroke-current text-white ml-2 fill-current"
                  version="1.1"
                  id="Capa_1"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  x="0px"
                  y="0px"
                  viewBox="0 0 512 512"
                  style="enable-background: new 0 0 512 512"
                  xml:space="preserve"
                >
                  <g>
                    <g>
                      <path
                        d="M506.955,1.314c-3.119-1.78-6.955-1.75-10.045,0.078L313.656,109.756c-4.754,2.811-6.329,8.943-3.518,13.697
    c2.81,4.753,8.942,6.328,13.697,3.518l131.482-77.749L210.411,303.335L88.603,266.069l158.965-94
    c4.754-2.812,6.329-8.944,3.518-13.698c-2.81-4.753-8.943-6.33-13.697-3.518L58.91,260.392c-3.41,2.017-5.309,5.856-4.84,9.791
    s3.216,7.221,7.004,8.38l145.469,44.504L270.72,439.88c0.067,0.121,0.136,0.223,0.207,0.314c1.071,1.786,2.676,3.245,4.678,4.087
    c1.253,0.527,2.57,0.784,3.878,0.784c2.563,0,5.086-0.986,6.991-2.849l73.794-72.12l138.806,42.466
    c0.96,0.293,1.945,0.438,2.925,0.438c2.116,0,4.206-0.672,5.948-1.961C510.496,409.153,512,406.17,512,403V10
    C512,6.409,510.074,3.093,506.955,1.314z M271.265,329.23c-1.158,1.673-1.779,3.659-1.779,5.694v61.171l-43.823-79.765
    l193.921-201.21L271.265,329.23z M289.486,411.309v-62.867l48.99,14.988L289.486,411.309z M492,389.483l-196.499-60.116
    L492,45.704V389.483z"
                      ></path>
                    </g>
                  </g>
                  <g>
                    <g>
                      <path
                        d="M164.423,347.577c-3.906-3.905-10.236-3.905-14.143,0l-93.352,93.352c-3.905,3.905-3.905,10.237,0,14.143
    C58.882,457.024,61.441,458,64,458s5.118-0.976,7.071-2.929l93.352-93.352C168.328,357.815,168.328,351.483,164.423,347.577z"
                      ></path>
                    </g>
                  </g>
                  <g>
                    <g>
                      <path
                        d="M40.071,471.928c-3.906-3.903-10.236-3.903-14.142,0.001l-23,23c-3.905,3.905-3.905,10.237,0,14.143
    C4.882,511.024,7.441,512,10,512s5.118-0.977,7.071-2.929l23-23C43.976,482.166,43.976,475.834,40.071,471.928z"
                      ></path>
                    </g>
                  </g>
                  <g>
                    <g>
                      <path
                        d="M142.649,494.34c-1.859-1.86-4.439-2.93-7.069-2.93c-2.641,0-5.21,1.07-7.07,2.93c-1.86,1.86-2.93,4.43-2.93,7.07
    c0,2.63,1.069,5.21,2.93,7.07c1.86,1.86,4.44,2.93,7.07,2.93s5.21-1.07,7.069-2.93c1.86-1.86,2.931-4.44,2.931-7.07
    C145.58,498.77,144.51,496.2,142.649,494.34z"
                      ></path>
                    </g>
                  </g>
                  <g>
                    <g>
                      <path
                        d="M217.051,419.935c-3.903-3.905-10.233-3.905-14.142,0l-49.446,49.445c-3.905,3.905-3.905,10.237,0,14.142
    c1.953,1.953,4.512,2.929,7.071,2.929s5.118-0.977,7.071-2.929l49.446-49.445C220.956,430.172,220.956,423.84,217.051,419.935z"
                      ></path>
                    </g>
                  </g>
                  <g>
                    <g>
                      <path
                        d="M387.704,416.139c-3.906-3.904-10.236-3.904-14.142,0l-49.58,49.58c-3.905,3.905-3.905,10.237,0,14.143
    c1.953,1.952,4.512,2.929,7.071,2.929s5.118-0.977,7.071-2.929l49.58-49.58C391.609,426.377,391.609,420.045,387.704,416.139z"
                      ></path>
                    </g>
                  </g>
                  <g>
                    <g>
                      <path
                        d="M283.5,136.31c-1.86-1.86-4.44-2.93-7.07-2.93s-5.21,1.07-7.07,2.93c-1.859,1.86-2.93,4.44-2.93,7.08
    c0,2.63,1.07,5.2,2.93,7.06c1.86,1.87,4.44,2.93,7.07,2.93s5.21-1.06,7.07-2.93c1.859-1.86,2.93-4.43,2.93-7.06
    C286.43,140.75,285.36,138.17,283.5,136.31z"
                      ></path>
                    </g>
                  </g>
                </svg>
                إرسال
              </button>
            </div>
          </div>
        </section>

        <section v-if=" marginalizedDocuments != '' || reply != null " class="py-3 ">
          <div class=" border-dotted border-2 border-gray-300 p-3">
          
            <div v-if=" reply != null " class="sm:col-span-6">
              <label
                for="about"
                class="block text-sm font-medium text-gray-700"
              >
                الرد
              </label>

              <div class="mt-1 h-40 w-full bg-white border-gray-300 rounded-md p-2 overflow-y-auto leading-8">
                {{ reply }}
              </div>
            </div>

            <div v-if=" marginalizedDocuments != '' " class="sm:col-span-6">
              <label
                for="cover_photo"
                class="block text-sm font-medium text-gray-700"
              >
                المستندات المهمش عليها
              </label>
              <br />

              <div
                class="mt-2 p-4 grid grid-cols-2 gap-4 sm:gap-8 border-2 border-gray-300 border-dashed rounded-md"
              >
                <div
                  v-for="(image, index) in marginalizedDocuments"
                  :key="index"
                  class="relative h-64 sm:h-96 w-full"
                >
                  <img :src="image.documentFile" class="w-full h-full rounded" />
                  <button
                    type="button"
                    class="absolute bg-green-600 hover:bg-green-500 duration-500 p-2 rounded-full bottom-0 inset-x-0 mx-auto mb-2 focus:outline-none"
                    @click="printImage(image.documentFile)"
                  >
                    <svg class="w-4 h-4 text-white fill-current" id="Capa_1" enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g><path d="m473.931 152.931h-25.932v-92.918c0-12.374-10.067-22.441-22.441-22.441h-22.441v-30.092c0-4.132-3.349-7.48-7.48-7.48h-279.272c-4.131 0-7.48 3.349-7.48 7.48v30.091h-22.442c-11.22 0-22.441 11.27-22.441 22.441v92.918h-25.933c-20.624 0-37.402 16.778-37.402 37.402v219.428c0 4.132 3.349 7.48 7.48 7.48h100.737v87.279c0 4.132 3.349 7.48 7.48 7.48h279.271c4.131 0 7.48-3.349 7.48-7.48v-87.279h100.737c4.131 0 7.48-3.349 7.48-7.48v-219.427c.001-20.624-16.777-37.402-37.401-37.402zm-48.374-100.398c4.125 0 7.48 3.355 7.48 7.48v92.918h-29.922v-100.398zm-346.595 279.93h29.922v29.921h-29.922zm309.193 164.576h-264.31v-164.576h264.31zm44.883-164.576v29.921h-29.922v-29.921zm63.334 69.817h-93.257v-24.935h37.402c4.131 0 7.48-3.349 7.48-7.48v-74.805c0-12.374-10.067-22.441-22.441-22.441h-13.625c-4.131 0-7.48 3.349-7.48 7.48 0 4.132 3.349 7.48 7.48 7.48h13.625c4.125 0 7.48 3.355 7.48 7.48v22.442h-354.074v-22.441c0-4.125 3.355-7.48 7.48-7.48h292.895c4.131 0 7.48-3.349 7.48-7.48 0-4.132-3.349-7.48-7.48-7.48h-292.894c-12.374 0-22.441 10.067-22.441 22.441v74.805c0 4.132 3.349 7.48 7.48 7.48h37.402v24.935h-93.256v-211.948c0-12.374 10.067-22.441 22.441-22.441h167.224c4.131 0 7.48-3.349 7.48-7.48s-3.349-7.48-7.48-7.48h-81.447v-49.86c0-4.132-3.349-7.48-7.48-7.48s-7.48 3.349-7.48 7.48v49.86h-29.924v-92.919c-.083-4.197 3.034-7.356 7.48-7.48h22.441v17.943c0 4.132 3.349 7.48 7.48 7.48s7.48-3.349 7.48-7.48v-55.515h264.31v137.97h-150.266c-4.131 0-7.48 3.349-7.48 7.48s3.349 7.48 7.48 7.48h236.044c12.374 0 22.441 10.067 22.441 22.441z"/><path d="m352.415 362.385h-192.83c-4.131 0-7.48 3.349-7.48 7.48 0 4.132 3.349 7.48 7.48 7.48h192.83c4.131 0 7.48-3.349 7.48-7.48 0-4.132-3.349-7.48-7.48-7.48z"/><path d="m352.415 402.281h-192.83c-4.131 0-7.48 3.349-7.48 7.48 0 4.132 3.349 7.48 7.48 7.48h192.83c4.131 0 7.48-3.349 7.48-7.48 0-4.132-3.349-7.48-7.48-7.48z"/><path d="m352.415 442.176h-192.83c-4.131 0-7.48 3.349-7.48 7.48 0 4.132 3.349 7.48 7.48 7.48h192.83c4.131 0 7.48-3.349 7.48-7.48s-3.349-7.48-7.48-7.48z"/><path d="m111.378 192.828h-39.896c-4.131 0-7.48 3.349-7.48 7.48v39.896c0 4.132 3.349 7.48 7.48 7.48h39.896c4.131 0 7.48-3.349 7.48-7.48v-39.896c0-4.132-3.349-7.48-7.48-7.48zm-7.481 39.895h-24.935v-24.935h24.935z"/><path d="m191.169 192.828h-39.896c-4.131 0-7.48 3.349-7.48 7.48v39.896c0 4.132 3.349 7.48 7.48 7.48h39.896c4.131 0 7.48-3.349 7.48-7.48v-39.896c.001-4.132-3.348-7.48-7.48-7.48zm-7.48 39.895h-24.935v-24.935h24.935z"/></g></svg>
                  </button>
                </div>

                
              </div>
            </div>
          </div>

        </section>
      </main>
    </div>

    <div
      v-if="showAlert"
      class="absolute inset-0 h-full w-full bg-gray-700 bg-opacity-75 flex justify-center items-center"
    >
      <div v-if="loading" class="h-64 flex justify-center items-center">
        <svg class="w-10 h-w-10 rounded-full" viewBox="0 0 38 38" stroke="#fff">
          <g fill="none">
            <g transform="translate(1 1)" stroke-width="2">
              <circle
                stroke="#E1E7EC"
                stroke-opacity=".5"
                cx="18"
                cy="18"
                r="18"
              />
              <path stroke="black" d="M36 18c0-9.94-8.06-18-18-18">
                <animateTransform
                  attributeName="transform"
                  type="rotate"
                  from="0 18 18"
                  to="360 18 18"
                  dur="1s"
                  repeatCount="indefinite"
                />
              </path>
            </g>
          </g>
        </svg>
      </div>

      <div v-else class="w-1/3 bg-cool-gray-100 rounded">
        <div
          v-if="Successed"
          class="bg-white p-7 w-full max-w-lg rounded-xl cursor-auto z-50"
        >
          <div class="flex justify-end">
            <button @click="showAlert = false" class="focus:outline-none">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M17.3941 19.5531L11.999 14.158L6.60398 19.5531C6.00806 20.149 5.04188 20.149 4.44596 19.5531C3.85004 18.9571 3.85004 17.991 4.44596 17.395L9.84101 12L4.44596 6.60496C3.85004 6.00904 3.85004 5.04286 4.44596 4.44694C5.04188 3.85102 6.00806 3.85102 6.60398 4.44694L11.999 9.84198L17.3941 4.44694C17.99 3.85102 18.9562 3.85102 19.5521 4.44694C20.148 5.04286 20.148 6.00904 19.5521 6.60496L14.157 12L19.5521 17.395C20.148 17.991 20.148 18.9571 19.5521 19.5531C18.9562 20.149 17.99 20.149 17.3941 19.5531Z"
                  fill="#676767"
                />
              </svg>
            </button>
          </div>

          <div class="flex justify-center mt-4">
            <svg
              width="60"
              height="60"
              viewBox="0 0 80 80"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle cx="40" cy="40" r="38" stroke="black" stroke-width="4" />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M56.3149 28.7293C57.2486 29.6808 57.225 31.2002 56.2621 32.123L36.2264 51.323C35.2843 52.2257 33.7871 52.2257 32.8451 51.323L23.7379 42.5957C22.775 41.673 22.7514 40.1535 23.6851 39.202C24.6188 38.2504 26.1563 38.227 27.1192 39.1498L34.5357 46.2569L52.8808 28.677C53.8437 27.7543 55.3812 27.7777 56.3149 28.7293Z"
                fill="black"
              />
            </svg>
          </div>

          <div class="text-center mt-8">
            <p class="text-2xl font-bold">{{ addSuccessed }}</p>
            <!-- <p class="text-sm mt-2">Permanently deleted</p> -->
          </div>

          <div @click="showAlert = false" class="mt-10 flex justify-center">
            <button class="bg-black text-center text-xs md:text-sm font-normal tracking-widest w-32 py-3 text-white rounded focus:outline-none hover:bg-white hover:text-black border hover:border-black transform duration-700">
              موافق
            </button>
          </div>
        </div>

        <div
          v-else
          class="bg-white p-7 w-full max-w-lg rounded-xl cursor-auto z-50"
        >
          <div class="flex justify-end">
            <button @click="showAlert = false" class="focus:outline-none">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M17.3941 19.5531L11.999 14.158L6.60398 19.5531C6.00806 20.149 5.04188 20.149 4.44596 19.5531C3.85004 18.9571 3.85004 17.991 4.44596 17.395L9.84101 12L4.44596 6.60496C3.85004 6.00904 3.85004 5.04286 4.44596 4.44694C5.04188 3.85102 6.00806 3.85102 6.60398 4.44694L11.999 9.84198L17.3941 4.44694C17.99 3.85102 18.9562 3.85102 19.5521 4.44694C20.148 5.04286 20.148 6.00904 19.5521 6.60496L14.157 12L19.5521 17.395C20.148 17.991 20.148 18.9571 19.5521 19.5531C18.9562 20.149 17.99 20.149 17.3941 19.5531Z"
                  fill="#676767"
                />
              </svg>
            </button>
          </div>

          <div class="flex justify-center mt-4">
            <svg
              width="60"
              height="60"
              viewBox="0 0 60 60"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M30 58.5C45.7401 58.5 58.5 45.7401 58.5 30C58.5 14.2599 45.7401 1.5 30 1.5C14.2599 1.5 1.5 14.2599 1.5 30C1.5 45.7401 14.2599 58.5 30 58.5Z"
                stroke="black"
                stroke-width="3"
              />
              <path
                d="M38 22L22 38"
                stroke="black"
                stroke-width="3"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M22 22L38 38"
                stroke="black"
                stroke-width="3"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>

          <div class="text-center mt-8">
            <p class="text-2xl font-bold">{{ addErorr }}</p>
            <!-- <p class="text-sm mt-2">Permanently deleted</p> -->
          </div>

          <div class="mt-10 flex justify-center">
            <button
              @click="showAlert = false"
              class="border border-black text-center text-xs md:text-sm font-normal tracking-widest w-32 py-3 text-black rounded focus:outline-none hover:bg-black hover:text-white hover:border-black transform duration-700"
            >
              إعادة المحاولة
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>


<script
  type="text/javascript"
  src="http://cdn.asprise.com/scannerjs/scanner.js"
></script>
<script>
import asidebar from "@/components/asidebar.vue";
import navaca from "@/components/nav.vue";
export default {
  components: {
    asidebar,
    navaca,
  },
  mounted() {
    if (
      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
        navigator.userAgent
      )
    ) {
      // true for mobile device
      this.isThisMobile = true;
      // document.write("mobile device");
    } else {
      this.isThisMobile = false;
      // false for not mobile device
      // document.write("not mobile device");
    }

    
    
    this.mailId = this.$route.params.mail;
    if (this.$route.params.mail) {
      this.$http.mailService
        .GetMailById(this.mailId)
        .then((res) => {
          console.log(res.data.result)
          var mail = res.data.result

          this.sender = mail.sender
          this.flag = mail.flag
          this.mailType = mail.mailType
          this.sentMessage = mail.sentMessage
          this.releaseDate = mail.releaseDate
          this.reply = mail.reply

          this.saveButton = false;
          this.updataButton = true;
          this.documentSection = true;
          this.proceduresSection = true;



if(this.flag == 3){      this.$http.mailService
        .EmploySee(this.mailId)
        .then((res) => {
          console.log("res")
          console.log(res)

          console.log("res")
        })
        .catch((err) => {
          console.log(err)
        }); }
     

          



          this.GetDocmentForMailToShow()
          this.GetDocmentForMailMarginalized()



          // this.loading = false;
          // this.Successed = true;
          // this.addSuccessed = res.data.response;
          
        })
        .catch((err) => {
          // this.loading = false;
          // this.Successed = false;
          this.addErorr = err;
        });

      // this.title_page = "Edit Product";
      // this.submit_text = "Edit";
      // this.showDelete = true;
    } else {
      // this.title_page = "Add Product";
      // this.submit_text = "Add";
    }

    
  },
  data() {
    return {
      isThisMobile: false,

      mailId: '',
      imagesToSend: [],
      imagesToShow: [],
      sender: "",
      reply: null,
      mailType: 1,
      releaseDate: "",
      sentMessage: "",

      saveButton: true,
      updataButton: false,

      showAlert: false,
      loading: false,
      Successed: false,
      addSuccessed: "",
      addErorr: null,

      documentSection : false,
      proceduresSection : false,

      marginalizedDocuments: [],
      reply: null
    };
  },

  methods: {
    
    onFileChange(e) {
      var files = e.target.files || e.dataTransfer.files;
      if (!files.length) return;
      this.createImage(files);
    },
    createImage(files) {
      var vm = this;
      for (var index = 0; index < files.length; index++) {
        var reader = new FileReader();
        reader.onload = function (event) {
          const imageUrl = event.target.result;
          vm.imagesToSend.push({documentFile:imageUrl});
        };
        reader.readAsDataURL(files[index]);
      }
    },
    removeImage(index) {
      this.imagesToSend.splice(index, 1);
    },

    scanToJpg() {
      scanner.scan(this.displayImagesOnPage, {
        output_settings: [
          {
            type: "return-base64",
            format: "jpg",
          },
        ],
      });
    },

    displayImagesOnPage(successful, mesg, response) {
      if (!successful) {
        // On error
        console.error("Failed: " + mesg);
        return;
      }

      if (
        successful &&
        mesg != null &&
        mesg.toLowerCase().indexOf("user cancel") >= 0
      ) {
        // User cancelled.
        console.info("User cancelled");
        return;
      }

      var scannedImages = scanner.getScannedImages(response, true, false); // returns an array of ScannedImage
      for (
        var i = 0;
        scannedImages instanceof Array && i < scannedImages.length;
        i++
      ) {
        var scannedImage = scannedImages[i];
        // this.processScannedImage(scannedImage);
        this.imagesToSend.push({documentFile:scannedImage.src});
      }
    },

    saveMail() {
      this.showAlert = true;
      this.loading = true;

      var mailInfo = {
        sender: this.sender,
        reply: this.reply,
        mailType: Number(this.mailType),
        releaseDate: this.releaseDate,
        sentMessage: this.sentMessage,
      };
      this.$http.mailService
        .AddMail(mailInfo)
        .then((res) => {
          setTimeout(() => {
            this.loading = false;
            this.Successed = true;
            this.addSuccessed = res.data.result.message;
            this.documentSection = true;
            this.proceduresSection = true;

            this.saveButton = false;
            this.updataButton = true;

            this.mailId = res.data.result.addedmail.mailId

          }, 500);
        })
        .catch((err) => {
          setTimeout(() => {
            this.loading = false;
            this.Successed = false;
            this.addErorr = err.message; 
          }, 500);
        });
    },

    GetDocmentForMailToShow(){
      this.$http.documentService
        .GetDocmentForMail(Number(this.mailId), 1)
        .then((res) => {
          this.imagesToShow = res.data.result.documents
        })
        .catch((err) => {
          this.addErorr = err.message; 
        });
    },

    GetDocmentForMailMarginalized(){
      this.$http.documentService
        .GetDocmentForMail(Number(this.mailId), 2)
        .then((res) => {
          this.marginalizedDocuments = res.data.result.documents
        })
        .catch((err) => {
          this.addErorr = err.message; 
        });
    },

    addDocuments() {
      this.showAlert = true;
      this.loading = true;

       var documenInfo = {
        mailId: Number(this.mailId),
        images: this.imagesToSend,
      };

      this.$http.documentService
        .AddDocument(documenInfo)
        .then((res) => {
          setTimeout(() => {
            this.loading = false;
            this.Successed = true;
            this.addSuccessed = res.data.result.message;

            this.imagesToSend = [];
            this.GetDocmentForMailToShow()
          }, 500);
        })
        .catch((err) => {
          setTimeout(() => {
            this.loading = false;
            this.Successed = false;
            this.addErorr = err.message; 
          }, 500);
        });
    },

    deleteDocument(documentId, index){
      this.$http.documentService
        .DeleteDocument(Number(documentId))
        .then((res) => {
          this.imagesToShow.splice(index, 1);
          console.log(res)
          // this.imagesToShow = res.data.result.documents
        })
        .catch((err) => {
          this.addErorr = err.message; 
        });

    },

    sendMail(){
      this.showAlert = true;
      this.loading = true;

      this.$http.mailService
        .SendMail(this.mailId)
        .then((res) => {
          setTimeout(() => {
            this.loading = false;
            this.Successed = true;
            this.addSuccessed = res.data.result.message;
          }, 500);
        })
        .catch((err) => {
          setTimeout(() => {
            this.loading = false;
            this.Successed = false;
            this.addErorr = err.message; 
          }, 500);
        });
    },


    updateMail(){
      this.showAlert = true;
      this.loading = true;

      var dataUpdate = {
        mailId: Number(this.mailId),
        sender: this.sender,
        reply: this.reply,
        mailType: Number(this.mailType),
        releaseDate: this.releaseDate,
        sentMessage: this.sentMessage,
      };

      this.$http.mailService
        .EditMail(dataUpdate)
        .then((res) => {
          setTimeout(() => {
            this.loading = false;
            this.Successed = true;
            this.addSuccessed = res.data.result.message;
          }, 500);
        })
        .catch((err) => {
          setTimeout(() => {
            this.loading = false;
            this.Successed = false;
            this.addErorr = err.message; 
          }, 500);
        });
    },

    deleteMail(){
      this.showAlert = true;
      this.loading = true;

      this.$http.mailService
        .DeleteMail(this.mailId)
        .then((res) => {
          setTimeout(() => {
            this.loading = false;
            this.Successed = true;
            this.addSuccessed = res.data.result.message;

            setTimeout(() => {
              this.$router.replace("/dashboard");
            }, 500);
          }, 500);
        })
        .catch((err) => {
          setTimeout(() => {
            this.loading = false;
            this.Successed = false;
            this.addErorr = err.message; 
          }, 500);
        });
    },

    printImage(img) {
        var Pagelink = "هيئة الرقابة الادارية ليبيا";
        var pwa = window.open(Pagelink, "_new", 'status=1,scrollbars=1,height=533,width=800');

        pwa.document.open();
        pwa.document.write(this.ImagetoPrint(img));
        pwa.document.close();
    },

    ImagetoPrint(img) {
      return "<html><head><scri" + "pt>function step1(){\n" +
        "setTimeout('step2()', 10);}\n" +
        "function step2(){window.print();window.close()}\n" +
        "</scri" + "pt></head><body onload='step1()'>\n" +
        "<img  style='padding:0; width: 100%; size:A4; margin:0;' src='" + img + "' /></body></html>";
    },

    

  },
};
</script>
